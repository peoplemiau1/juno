# Рекомендации по дальнейшему развитию Juno

## Приоритет 1: Критические улучшения

### 1. Автоматическое тестирование
**Проблема:** Нет автоматических тестов, регрессии не отслеживаются

**Решение:**
```bash
# Создать test runner
ruby test_runner.rb

# Или использовать готовые скрипты
test.bat  # Windows
./test.sh # Linux
```

**Что тестировать:**
- Все базовые операции (арифметика, сравнения)
- Вызовы функций (1, 2, 3+ аргументов)
- Структуры и методы
- Циклы и условия
- Указатели
- Импорты

### 2. Register Allocation
**Проблема:** Все операции через RAX и стек - неэффективно

**Решение:**
- Использовать RBX, R12-R15 для переменных
- Анализ времени жизни переменных
- Минимизация push/pop операций

**Файл:** `src/optimizer/register_allocator.rb` (уже создан, нужна интеграция)

### 3. Улучшенная обработка ошибок
**Проблема:** Ошибки не показывают позицию в коде

**Решение:**
```ruby
# Добавить в лексер/парсер
def error(msg, line, col)
  puts "\e[31mError at line #{line}, column #{col}:\e[0m"
  puts "  #{@source_lines[line]}"
  puts "  #{' ' * col}^"
  puts "  #{msg}"
  exit 1
end
```

## Приоритет 2: Новые возможности

### 4. Полная поддержка указателей
**Что добавить:**
- Арифметика указателей: `ptr + 1`, `ptr - 2`
- Указатели на указатели: `**ptr`
- Передача 2+ указателей в функцию
- Массивы указателей

### 5. Типизация
**Синтаксис:**
```juno
fn add(a: int, b: int): int {
    return a + b
}

let x: int = 5
let ptr: *int = &x
```

**Преимущества:**
- Проверка типов на этапе компиляции
- Лучшая оптимизация
- Документация в коде

### 6. Строки в выражениях
**Синтаксис:**
```juno
let greeting = "Hello, " + name + "!"
```

**Требует:**
- Runtime string concatenation
- Управление памятью для строк
- Garbage collection или manual free

## Приоритет 3: Инфраструктура

### 7. CI/CD
**GitHub Actions:**
```yaml
name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: ruby/setup-ruby@v1
      - run: ruby test_runner.rb
```

### 8. Документация
**Что добавить:**
- Туториал для начинающих
- API reference для stdlib
- Примеры для каждой фичи
- Гайд по написанию модулей

### 9. LSP (Language Server Protocol)
**Возможности:**
- Подсветка синтаксиса в VS Code
- Автодополнение
- Go to definition
- Показ ошибок в реальном времени

## Приоритет 4: Долгосрочные цели

### 10. Самохостинг
**Цель:** Переписать компилятор с Ruby на Juno

**Требует:**
- Полностью рабочий компилятор
- Файловый I/O
- Парсинг строк
- Коллекции (HashMap, Vector)

### 11. Отладчик
**Возможности:**
- Breakpoints
- Step through code
- Inspect variables
- DWARF debug info (Linux)
- PDB (Windows)

### 12. Пакетный менеджер
**Синтаксис:**
```bash
juno install http-client
juno install json-parser
```

**Требует:**
- Репозиторий пакетов
- Версионирование
- Разрешение зависимостей

## Быстрые победы (Quick Wins)

### Легко реализовать:
1. **Hex/binary литералы:** `0xFF`, `0b1010`
2. **Многострочные комментарии:** `/* ... */`
3. **Больше escape sequences:** `\r`, `\0`, `\\`
4. **Унарный плюс:** `+42`
5. **Составные операторы:** `+=`, `-=`, `*=`, `/=`

### Средняя сложность:
1. **Break/continue** в циклах
2. **Switch/case** statements
3. **Тернарный оператор:** `x > 0 ? 1 : -1`
4. **Массивы переменной длины**
5. **Enum types**

## Метрики качества

### Покрытие тестами
- [ ] Базовые операции: 100%
- [ ] Функции: 100%
- [ ] Структуры: 100%
- [ ] Циклы: 100%
- [ ] Указатели: 80%
- [ ] Импорты: 50%

### Производительность
- [ ] Компиляция < 1 сек для 1000 строк
- [ ] Оптимизация: constant folding
- [ ] Оптимизация: dead code elimination
- [ ] Оптимизация: register allocation

### Документация
- [ ] README с примерами
- [ ] API reference для всех builtin функций
- [ ] Туториал для начинающих
- [ ] Примеры для каждой фичи

---

**Следующий шаг:** Выберите 1-2 задачи из Приоритета 1 и начните с них!
